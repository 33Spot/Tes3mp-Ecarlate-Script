--DeathChoice

--tes3mp v.0.7.0
--openmw 0.44

1) open commandHandler.lua and add following the text commands:

	elseif cmd[1] == "resurrect" then
		Players[pid]:Resurrect()

2) Create a file named DeathChoice.lua in scripts/menu (so it has a clearer name) and make it contain this :

Menus["resurrect"] = {
    text = color.Gold .. "Do you want\n" .. color.LightGreen ..
    "revive\n" .. color.Gold .. "or wait ?\n" ..
        color.White .. "...",
    buttons = {						
        { caption = "revive",
            destinations = {menuHelper.destinations.setDefault(nil,
            { 
				menuHelper.effects.runGlobalFunction(nil, "OnPlayerSendMessage",
					{menuHelper.variables.currentPid(), "/resurrect"})
                })
            }
        },			
        { caption = "wait", destinations = nil }
    }
}

3) Open config.lua find config.menuHelperFiles and add the name of menu like this :
config.menuHelperFiles = { "help", "defaultCrafting", "advancedExample", "DeathChoice" }

4) Open eventHandler find OnDeathTimeExpiration and replace like this:

eventHandler.OnDeathTimeExpiration = function(pid)
    if Players[pid] ~= nil and Players[pid]:IsLoggedIn() then
      Players[pid].currentCustomMenu = "resurrect"--Menu Resurrect
      menuHelper.DisplayMenu(pid, Players[pid].currentCustomMenu)	
    end
end
